{% extends "base.html" %}
{% block title %}アップロード | 英単語テストPDF{% endblock %}
{% block content %}
<h2>Excel(.xlsx) アップロード</h2>
<form action="{{ url_for('upload') }}" method="post" enctype="multipart/form-data">
  <label>ファイルを選択（.xlsx のみ、最大16MB）</label>
  <input type="file" name="file" accept=".xlsx" required />
  <div style="margin-top:10px;">
    <button type="submit">アップロード</button>
  </div>
</form>

<h3>アップロード済みファイル</h3>
{% if files %}
  <!-- 画面内のどこか一度だけ置けばOK。すでに<style>があれば追記でOK -->
<style>
  .file-table { width: min(800px, 100%); border-collapse: collapse; }
  .file-table th, .file-table td { border: 1px solid #ddd; padding: 8px 10px; }
  /* ← ファイル名セルは折り返して全表示 */
  .file-table td.filename {
    white-space: normal;         /* 折り返し許可 */
    word-break: break-word;      /* 長い単語も折る */
    overflow-wrap: anywhere;     /* どこでも折ってOK（モダンブラウザ） */
    max-width: 100%;
  }
</style>

<h2>アップロード済みファイル</h2>
<table class="file-table">
  <thead>
    <tr>
      <!-- 幅固定を外す／100%にする -->
      <th style="width: 100%;">ファイル名</th>
    </tr>
  </thead>
  <tbody>
    {% for f in files %}
      <tr>
        <!-- filename クラスを付与 -->
        <td class="filename">{{ f }}</td>
      </tr>
    {% else %}
      <tr><td class="filename">（まだありません）</td></tr>
    {% endfor %}
  </tbody>
</table>

{% else %}
  <p>まだファイルがありません。</p>
{% endif %}
{% endblock %}
